<!DOCTYPE html><html lang="ht">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Echanj Plus ‚Äî App</title>
  <meta name="theme-color" content="#16a34a" />
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    :root{
      --bg: #e9f7ee; /* v√®t lej√® */
      --card: #ffffff; /* blan */
      --text: #052018; /* nwa lej√® */
      --muted: #4b5563;
      --primary: #16a34a;
      --accent: #0b7a3a;
      --radius: 18px;
      --gap: 12px;
      --maxw: 520px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    .app{min-height:100svh;min-height:100dvh;padding:env(safe-area-inset-top) env(safe-area-inset-right) calc(16px + env(safe-area-inset-bottom)) env(safe-area-inset-left);display:grid;place-items:center}
    .full-card{width:min(100%,var(--maxw));background:var(--card);border-radius:20px;padding:20px;border:1px solid rgba(0,0,0,0.06);box-shadow:0 8px 30px rgba(2,6,23,0.06)}
    h1{margin:0;font-size:1.3rem}
    p{margin:6px 0;color:var(--muted)}
    label{font-size:.85rem;color:var(--muted);display:block;margin-top:8px}
    input,select,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(2,6,23,0.06);margin-top:6px}
    button.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:12px;border:0;background:var(--primary);color:white;font-weight:700;margin-top:12px}
    button.btn.secondary{background:#f3f4f6;color:var(--text);border:1px solid rgba(2,6,23,0.06)}
    .row{display:grid;gap:12px}
    .cols-2{grid-template-columns:1fr 1fr}
    .center{text-align:center}
    .muted{color:var(--muted)}
    .small{font-size:.85rem}
    [data-screen]{display:none}
    [data-screen].active{display:grid;place-items:center;height:100%}
    nav.toolbar{position:fixed;inset:auto 0 0 0;background:transparent;padding:10px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .tab{background:var(--card);border-radius:12px;padding:10px;border:1px solid rgba(0,0,0,0.06);text-align:center;font-weight:700}
    .tab.active{background:var(--primary);color:white}
    .auth-card{width:100%;max-width:420px;height:100%;display:flex;flex-direction:column;justify-content:center}
    .auth-forms{display:grid;gap:12px}
    .link{color:var(--primary);cursor:pointer}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:90px;background:#052018;color:white;padding:10px 14px;border-radius:10px;display:none}
  </style>
</head>
<body>
  <div id="app" class="app"><!-- AUTH SCREEN -->
<section id="screen-auth" class="active" data-screen>
  <div class="full-card auth-card center">
    <h1>Echanj Plus</h1>
    <p class="muted center">Konekte oswa kreye kont pou kontinye.</p>
    <div class="auth-forms">
      <div id="login-form">
        <label>Im√®l</label>
        <input id="login-email" type="email" placeholder="email@exemple.com" />
        <label>Modpas</label>
        <input id="login-pass" type="password" placeholder="Modpas" />
        <button class="btn" id="btn-login">Konekte</button>
        <button class="btn secondary" onclick="show('signup')">Pa gen kont? Enskri</button>
      </div>
      <div id="signup-form" style="display:none">
        <label>Im√®l</label>
        <input id="su-email" type="email" placeholder="email@exemple.com" />
        <label>Modpas</label>
        <input id="su-pass" type="password" placeholder="Modpas" />
        <label>Non</label>
        <input id="su-name" placeholder="Jean Echanj" />
        <label>Telef√≤n</label>
        <input id="su-phone" placeholder="+509 33 12 34 56" />
        <button class="btn" id="btn-signup">Kreye kont</button>
        <button class="btn secondary" onclick="show('login')">Deja gen kont? Konekte</button>
      </div>
    </div>
    <p class="small muted center">Kontakte: <strong>echanjplus@gmail.com</strong></p>
  </div>
</section>

<!-- Tout l√≤t seksyon Dashboard, Send, Payment, Profile, About rete menm jan nan ansyen k√≤d la -->

  </div>  <nav class="toolbar">
    <div class="tab active" data-tab="dashboard" onclick="go('dashboard')">üè†</div>
    <div class="tab" data-tab="send" onclick="go('send')">üì§</div>
    <div class="tab" data-tab="pay" onclick="go('pay')">üí≥</div>
    <div class="tab" data-tab="profile" onclick="go('profile')">üë§</div>
  </nav>  <div id="toast" class="toast"></div>  <script>
    const firebaseConfig = {apiKey:"REPLACE_WITH_YOUR_APIKEY",authDomain:"REPLACE_WITH_YOUR_AUTHDOMAIN",databaseURL:"REPLACE_WITH_YOUR_DBURL",projectId:"REPLACE_WITH_YOUR_PID",storageBucket:"REPLACE_WITH_SB",messagingSenderId:"REPLACE_WITH_MSGID",appId:"REPLACE_WITH_APPID"};
    const SYSTEM = {digicel:'+50947111123',natcom:'+50932160708',email:'echanjplus@gmail.com'};
    const FEE_PERCENT = 17.5;
    const WHATSAPP_TARGET = SYSTEM.digicel;
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    function show(mode){
      document.getElementById('login-form').style.display = (mode==='login')? 'block':'none';
      document.getElementById('signup-form').style.display = (mode==='signup')? 'block':'none';
    }

    async function doSignup(){
      const email = document.getElementById('su-email').value.trim();
      const pass = document.getElementById('su-pass').value;
      const name = document.getElementById('su-name').value.trim();
      const phone = document.getElementById('su-phone').value.trim();
      if(!email||!pass||!name) return toast('Ranpli tout chan obligatwa');
      try{
        const userCred = await auth.createUserWithEmailAndPassword(email, pass);
        const uid = userCred.user.uid;
        await db.ref('users/'+uid).set({name,phone,email,created:Date.now()});
        toast('Kont kreye av√®k siks√®');
      }catch(e){toast(e.message)}
    }

    async function doLogin(){
      const email = document.getElementById('login-email').value.trim();
      const pass = document.getElementById('login-pass').value;
      if(!email||!pass) return toast('Antre im√®l ak modpas');
      try{ await auth.signInWithEmailAndPassword(email, pass); }
      catch(e){ toast(e.message); }
    }

    document.addEventListener('DOMContentLoaded',()=>{
      document.getElementById('btn-login').addEventListener('click', doLogin);
      document.getElementById('btn-signup').addEventListener('click', doSignup);
    });

    auth.onAuthStateChanged(async user=>{
      if(user){
        document.querySelectorAll('[data-screen]').forEach(s=>s.classList.remove('active'));
        document.getElementById('screen-dashboard').classList.add('active');
        const uid = user.uid;
        const snap = await db.ref('users/'+uid).once('value');
        const data = snap.val() || {};
        document.getElementById('user-display').textContent = data.name || user.email;
        document.getElementById('pf_name').value = data.name || '';
        document.getElementById('pf_phone').value = data.phone || '';
        document.getElementById('pf_email').value = user.email || '';
      } elseÔøºEnter
