<!DOCTYPE html><html lang="ht">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Echanj Plus ‚Äî App</title>
<meta name="theme-color" content="#16a34a" />
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
:root{
  --primary:#16a34a;
  --accent:#0b7a3a;
  --bg:#f0f4f8;
  --card:#ffffff;
  --text:#052018;
  --muted:#4b5563;
  --danger:#dc2626;
  --radius:18px;
  --gap:12px;
  --maxw:520px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,sans-serif}
.app{min-height:100svh;display:grid;place-items:center;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);}
.full-card{width:min(100%,var(--maxw));background:var(--card);border-radius:var(--radius);padding:20px;border:1px solid rgba(0,0,0,0.06);box-shadow:0 8px 30px rgba(2,6,23,0.07)}
h1{margin:0;font-size:1.35rem}
p{margin:6px 0;color:var(--muted)}
label{font-size:.9rem;color:var(--muted);display:block;margin-top:8px}
input,select,textarea{width:100%;padding:12px;border-radius:14px;border:1px solid rgba(2,6,23,0.08);margin-top:6px;background:#fff}
button.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:14px;border:0;background:var(--primary);color:white;font-weight:800;margin-top:12px;box-shadow:0 6px 16px rgba(22,163,74,.25);cursor:pointer}
button.btn.secondary{background:#f3f4f6;color:var(--text);border:1px solid rgba(2,6,23,0.08);box-shadow:none}
button.btn[disabled]{opacity:.6;cursor:not-allowed}
.row{display:grid;gap:12px}.cols-2{grid-template-columns:1fr 1fr}.center{text-align:center}.muted{color:var(--muted)}.small{font-size:.85rem}
[data-screen]{display:none}[data-screen].active{display:grid;place-items:center;height:100%}
.toolbar{position:fixed;inset:auto 0 0 0;background:transparent;padding:10px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.tab{background:var(--card);border-radius:14px;padding:10px;text-align:center;font-weight:800}.tab.active{background:var(--primary);color:white}
.auth-card{width:100%;max-width:420px;height:100%;display:flex;flex-direction:column;justify-content:center}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:90px;background:var(--text);color:white;padding:10px 14px;border-radius:10px;display:none;z-index:10}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.05);display:none;place-items:center;z-index:9}
.spinner{width:40px;height:40px;border-radius:50%;border:4px solid #e5e7eb;border-top-color:var(--primary);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,0.08);background:#fff}.code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}
</style>
</head>
<body>
<div id="app" class="app"><!-- AUTH --><section id="screen-auth" class="active" data-screen>
<div class="full-card auth-card center">
<h1>Echanj Plus</h1>
<p class="muted center">Konekte oswa kreye kont pou kontinye.</p>
<div class="auth-forms">
<div id="login-form">
<label>Im√®l</label><input id="login-email" type="email" placeholder="email@exemple.com" />
<label>Modpas</label><input id="login-pass" type="password" placeholder="Modpas" />
<button class="btn" id="btn-login">Konekte</button>
<button class="btn secondary" onclick="show('signup')">Pa gen kont? Enskri</button>
</div>
<div id="signup-form" style="display:none">
<label>Im√®l</label><input id="su-email" type="email" placeholder="email@exemple.com" />
<label>Modpas</label><input id="su-pass" type="password" placeholder="8+ karakt√®" />
<label>Non</label><input id="su-name" placeholder="Jean Echanj" />
<label>Telef√≤n</label><input id="su-phone" placeholder="+509 33 12 34 56" />
<button class="btn" id="btn-signup">Kreye kont</button>
<button class="btn secondary" onclick="show('login')">Deja gen kont? Konekte</button>
</div>
</div>
<p class="small muted center">Kontakte: <strong>echanjplus@gmail.com</strong></p>
</div>
</section><!-- DASHBOARD --><section id="screen-dashboard" data-screen>
<div class="full-card">
<h1>üè† Ak√®y</h1>
<p class="muted">Byenveni, <span id="user-display" class="badge">itilizat√®</span></p>
<p class="small">Balance: <span id="balance">0</span> Gdes | SystemBalance: <span id="systemBalance">0</span> Gdes</p>
<div class="row cols-2" style="margin-top:10px">
<button class="btn" onclick="go('send')">üì§ Voye Minit</button>
<button class="btn" onclick="go('pay')">üí≥ Peman</button>
</div>
<div class="row cols-2" style="margin-top:8px">
<button class="btn secondary" onclick="go('profile')">üë§ Pwofil</button>
<button class="btn secondary" onclick="go('about')">‚ÑπÔ∏è About</button>
</div>
</div>
</section><!-- SEND MINUTES --><section id="screen-send" data-screen>
<div class="full-card">
<h1>üì§ Voye Minit</h1>
<label>Operat√®</label>
<select id="op" onchange="updateSendUI()">
<option value="digicel">Digicel</option>
<option value="natcom">Natcom</option>
</select>
<label>Kantite minit</label>
<input id="minutes" inputmode="numeric" placeholder="Ex: 50" oninput="updateUSSD()" />
<div class="badge">ID Kliyan: <span id="auto-id" class="code"></span></div>
<div class="badge">Nimewo Sist√®m: <span id="sys-num" class="code"></span></div>
<div class="row">
<label>K√≤d pou konpoze</label>
<input id="ussd" readonly class="code" />
<div id="confirm-wrap" class="row">
<label>K√≤d konfimasyon (Digicel)</label>
<input id="ussd-confirm" readonly class="code" />
</div>
</div>
<div class="row cols-2">
<button class="btn" onclick="composeUSSD()">üìû Konpoze</button>
<button class="btn secondary" onclick="go('dashboard')">‚¨ÖÔ∏è Tounen</button>
</div>
<p class="small muted">Remak: Pou Digicel, apre premye k√≤d la, konpoze k√≤d konfimasyon an tou.</p>
</div>
</section><!-- PAYMENT --><section id="screen-pay" data-screen>
<div class="full-card">
<h1>üí≥ Peman</h1>
<p class="muted small">Ranpli met√≤d peman, peze <strong>Sove / Peye</strong>.</p>
<label>Met√≤d</label>
<select id="pay-method" onchange="renderPayForm()">
<option value="moncash">MonCash</option>
<option value="natcash">NatCash</option>
