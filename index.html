<!DOCTYPE html>
<html lang="ht">
<head>
<meta charset="UTF-8">
<title>Echanj Plus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; }
header { background: #1976d2; color: white; padding: 15px; text-align: center; }
.container { max-width: 400px; margin: auto; background: white; padding: 20px; margin-top: 20px; border-radius: 10px; }
input, button, select { width: 100%; padding: 10px; margin: 8px 0; border-radius: 5px; border: 1px solid #ccc; }
button { background: #1976d2; color: white; border: none; cursor: pointer; }
button:hover { background: #125aa0; }
.hidden { display: none; }
nav button { width: auto; margin: 5px; }
h2 { text-align: center; }
</style>
</head>
<body>

<header>
  <h1>Echanj Plus</h1>
</header>

<!-- Login -->
<div id="login-section" class="container">
  <h2>Login</h2>
  <input type="email" id="login-email" placeholder="Imèl">
  <input type="password" id="login-password" placeholder="Modpas">
  <button onclick="login()">Login</button>
  <button onclick="showSection('register-section')">Ale nan Enskripsyon</button>
</div>

<!-- Register -->
<div id="register-section" class="container hidden">
  <h2>Enskripsyon</h2>
  <input type="email" id="register-email" placeholder="Imèl">
  <input type="password" id="register-password" placeholder="Modpas">
  <button onclick="register()">Enskri</button>
  <button onclick="showSection('login-section')">Retounen Login</button>
</div>

<!-- Page Voye Minit -->
<div id="minit-section" class="container hidden">
  <h2>Voye Minit</h2>
  <button onclick="callUSSD('*128*50947111123*100#')">Voye Digicel</button>
  <button onclick="callUSSD('*128*1#')">Konfime Digicel</button>
  <button onclick="callUSSD('*123*88888888*32160708*100#')">Voye Natcom</button>
  <hr>
  <button onclick="showSection('payment-section')">Ale nan Peman</button>
  <button onclick="logout()">Dekonekte</button>
</div>

<!-- Page Peman -->
<div id="payment-section" class="container hidden">
  <h2>Peman</h2>
  <select id="payment-method" onchange="changePaymentMethod()">
    <option value="">Chwazi metòd</option>
    <option value="moncash">Mon Cash</option>
    <option value="natcash">Natcash</option>
    <option value="paryaj">Paryaj Lakay</option>
  </select>

  <div id="moncash-form" class="hidden">
    <input type="text" placeholder="Non kont" id="moncash-name">
    <input type="text" placeholder="Nimero kont" id="moncash-num">
    <input type="number" placeholder="Montan" id="moncash-amount">
    <button onclick="payer('Mon Cash')">Peye</button>
  </div>

  <div id="natcash-form" class="hidden">
    <input type="text" placeholder="Non kont" id="natcash-name">
    <input type="text" placeholder="Nimero kont" id="natcash-num">
    <input type="number" placeholder="Montan" id="natcash-amount">
    <button onclick="payer('Natcash')">Peye</button>
  </div>

  <div id="paryaj-form" class="hidden">
    <input type="text" placeholder="Nimero kont" id="paryaj-num">
    <input type="number" placeholder="Montan" id="paryaj-amount">
    <button onclick="payer('Paryaj Lakay')">Peye</button>
  </div>

  <button onclick="showSection('minit-section')">Retounen</button>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

<script>
// Config Firebase
const firebaseConfig = {
  apiKey: "AIzaSyAjK6EPlokkARHnakMaDRjqRzN-yQqlayU",
  authDomain: "echanj-plus.firebaseapp.com",
  projectId: "echanj-plus"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

auth.onAuthStateChanged(user => {
  if (user) {
    showSection('minit-section');
  } else {
    if (currentSection !== 'register-section') {
      showSection('login-section');
    }
  }
});

function register(){
  const email = document.getElementById('register-email').value;
  const password = document.getElementById('register-password').value;
  auth.createUserWithEmailAndPassword(email, password)
    .then(() => {
      alert("Kont kreye! Konekte kounye a.");
      showSection('login-section');
    })
    .catch(err => alert(err.message));
}

function login(){
  const email = document.getElementById('login-email').value;
  const password = document.getElementById('login-password').value;
  auth.signInWithEmailAndPassword(email, password)
    .catch(err => alert(err.message));
}

function logout(){
  auth.signOut();
}

let currentSection = 'login-section';
function showSection(id){
  document.querySelectorAll('.container').forEach(div => div.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  currentSection = id;
}

function callUSSD(code){
  alert("Kòd USSD: " + code);
  // Pou fè li otomatik sou telefòn Android, ou ka itilize: window.location.href = "tel:" + encodeURIComponent(code);
}

function changePaymentMethod(){
  document.getElementById('moncash-form').classList.add('hidden');
  document.getElementById('natcash-form').classList.add('hidden');
  document.getElementById('paryaj-form').classList.add('hidden');
  let method = document.getElementById('payment-method').value;
  if(method === 'moncash') document.getElementById('moncash-form').classList.remove('hidden');
  if(method === 'natcash') document.getElementById('natcash-form').classList.remove('hidden');
  if(method === 'paryaj') document.getElementById('paryaj-form').classList.remove('hidden');
}

function payer(type){
  alert(type + " peye avèk siksè!");
}
</script>
</body>
  </html>
