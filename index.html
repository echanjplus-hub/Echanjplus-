<!doctype html>
<html lang="ht">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ECHANJ PLUS</title>
<style>
  :root{
    --bg:#061e33; /* ble fonse */
    --card: rgba(255,255,255,0.04);
    --muted: #a9c2df;
    --accent: #FFD700; /* jòn */
    --accent-dark: #e6c200;
    --danger: #ef4444;
    --ok:#10b981;
    --glass-border: rgba(255,255,255,0.08);
    --ink:#000000;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Arial, Helvetica, sans-serif;background:var(--bg);color:#fff}
  /* ===== Splash ===== */
  #splash{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;background:var(--bg);overflow:hidden}
  #splash::before{
    content:"";position:absolute;inset:0;
    background:
      radial-gradient(circle at 12% 15%, rgba(0,0,0,0.28) 0 5%, transparent 6%),
      radial-gradient(circle at 30% 30%, rgba(0,0,0,0.22) 0 7%, transparent 8%),
      radial-gradient(circle at 75% 18%, rgba(0,0,0,0.24) 0 6%, transparent 7%),
      radial-gradient(ellipse at 80% 70%, rgba(0,0,0,0.15) 0 8%, transparent 9%),
      linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.03));
    mix-blend-mode:multiply; pointer-events:none; opacity:0.95;
    animation: drip 3.6s ease-in-out infinite;
  }
  @keyframes drip{0%{transform:translateY(0)}50%{transform:translateY(6px)}100%{transform:translateY(0)}}
  .glass {
    width:260px; height:260px; border-radius:22px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    border:1px solid var(--glass-border);
    backdrop-filter: blur(8px) saturate(120%);
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    box-shadow: 0 18px 50px rgba(2,6,23,0.55);
    display:flex;align-items:center;justify-content:center;position:relative;
    transform-origin:center;
    animation: rotateBackForth 4.4s ease-in-out infinite;
  }
  @keyframes rotateBackForth{
    0%{transform: rotate(-18deg)}
    25%{transform: rotate(18deg)}
    50%{transform: rotate(-18deg)}
    75%{transform: rotate(18deg)}
    100%{transform: rotate(-18deg)}
  }
  .brand {
    position:absolute; z-index:5; text-align:center; pointer-events:none;
    font-weight:900; font-family: Arial, Helvetica, sans-serif;
    font-size:56px; line-height:0.95; letter-spacing:1px;
    color:#fff;
    text-shadow:
      0 0 6px rgba(255,215,0,0.6),
      0 0 22px rgba(255,215,0,0.28),
      0 2px 0 rgba(0,0,0,0.35);
  }
  .brand em{ color:var(--accent); font-style:normal; text-shadow:
      0 0 10px rgba(255,215,0,0.9),
      0 0 28px rgba(255,215,0,0.4); }
  .glass::after{
    content:""; position:absolute; top:10px; left:6%; width:78%; height:28%;
    background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.0));
    transform: rotate(-12deg); border-radius:12px; filter: blur(4px); opacity:0.7;
  }
  .splash-note { margin-top:18px; color:var(--muted); font-size:13px }

  /* ===== App ===== */
  #app{display:none;min-height:100vh;padding-bottom:86px}
  .container{max-width:1100px;margin:0 auto;padding:20px}

  /* Cards & inputs */
  .card{ background: rgba(255,255,255,0.03); border-radius:14px; padding:18px; border:1px solid rgba(255,255,255,0.05); box-shadow:0 10px 30px rgba(0,0,0,0.45) }
  label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
  input,select,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff;margin-top:6px}
  textarea{min-height:80px;resize:vertical}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .btn{ display:inline-block; padding:12px 14px; border-radius:10px; border:0; font-weight:800; cursor:pointer }
  .btn-primary{ background:var(--accent); color:#000 }
  .btn-alt{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.08) }
  .btn-danger{ background:var(--danger); color:#fff }
  .btn-ghost{ background:transparent; color:#ffd54a; text-decoration:underline; font-weight:700 }

  .muted{ color:var(--muted) }
  .small{ font-size:13px }
  .center{text-align:center}
  .hidden{ display:none }

  /* Auth block */
  .auth-wrap{ min-height:100vh; display:flex; align-items:center; justify-content:center; padding:20px }
  .auth{ max-width:480px; width:100% }

  /* Loader */
  #loader{ display:none; position:fixed; inset:0; background:rgba(2,6,23,0.6); align-items:center; justify-content:center; z-index:120 }
  #loader .box{ background:#fff;color:#000;padding:14px 18px;border-radius:12px;font-weight:800 }

  /* Wallet */
  .wallet{ background: linear-gradient(135deg, rgba(255,215,0,0.12), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.08); border-radius:16px; padding:16px }
  .wallet-header{ display:flex; align-items:center; gap:10px; font-weight:900 }
  .logo-mini{ width:36px; height:36px; border-radius:10px; background: radial-gradient(circle at 30% 30%, #FFD700, #000); box-shadow:0 6px 20px rgba(0,0,0,0.45) }
  .balances{ display:flex; gap:14px; margin-top:10px; flex-wrap:wrap }
  .pill{ flex:1; min-width:180px; padding:12px; border-radius:12px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.06) }
  .pill h4{ margin:0; font-size:13px; color:var(--muted) }
  .pill .val{ margin-top:6px; font-size:20px; font-weight:900 }

  /* Top bar brand fixed in app */
  .topbar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:14px }
  .brand-top{ font-size:26px; font-weight:900; letter-spacing:0.5px }
  .brand-top em{ color:var(--accent); font-style:normal }
  .maskEmail{ color:#fff; font-weight:700 }

  /* Bottom nav (with Akey center) */
  nav.bottom{ position:fixed; left:0; right:0; bottom:10px; height:66px; display:flex; align-items:center; justify-content:center; z-index:115 }
  .nav-inner{ width:100%; max-width:1100px; display:grid; grid-template-columns: repeat(5, 1fr); gap:10px; padding:8px; background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border-radius:14px; border:1px solid rgba(255,255,255,0.05); box-shadow:0 10px 30px rgba(0,0,0,0.45) }
  .nav-btn{ text-align:center; padding:10px 8px; border-radius:10px; font-weight:800; cursor:pointer; user-select:none }
  .nav-btn.active{ background:var(--accent); color:#000 }
  .nav-btn.inactive{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.06) }

  /* Pages + swipe */
  #pages{ position:relative; overflow:hidden }
  .page{ transition:transform .25s ease; }
  .swipe-area{ touch-action:pan-y; }

  /* Accordion */
  .acc-item{ border:1px solid rgba(255,255,255,0.08); border-radius:12px; margin-bottom:10px; overflow:hidden }
  .acc-head{ padding:12px 14px; background:rgba(255,255,255,0.04); cursor:pointer; font-weight:900 }
  .acc-body{ display:none; padding:12px 14px; background:rgba(255,255,255,0.02) }

  @media (max-width:720px){
    .brand{ font-size:44px }
    .glass{ width:210px; height:210px }
    .container{ padding:14px }
    .pill .val{ font-size:18px }
    .brand-top{ font-size:22px }
  }
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div class="glass" aria-hidden="true"></div>
  <div class="brand" aria-hidden="true"><em>ECHANJ</em> PLUS</div>
  <div class="splash-note">Ap prepare aplikasyon an…</div>
</div>

<!-- LOADER -->
<div id="loader"><div class="box">Ap tann…</div></div>

<!-- APP -->
<div id="app">
  <div class="container">

    <!-- ===== AUTH ===== -->
    <div id="authWrap" class="auth-wrap">
      <div class="auth card">
        <div class="brand-top center" style="margin-bottom:10px"><em>ECHANJ</em> PLUS</div>

        <!-- Tabs -->
        <div class="row" style="margin-bottom:10px">
          <button id="tabLogin" class="btn btn-primary" style="flex:1">Konekte</button>
          <button id="tabSignup" class="btn btn-alt" style="flex:1">Kreye Kont</button>
        </div>

        <!-- LOGIN -->
        <div id="loginPane">
          <label>Imèl</label><input id="loginEmail" type="email" placeholder="ou@exemple.com" autocomplete="username">
          <label>Modpas</label><input id="loginPassword" type="password" placeholder="••••••" autocomplete="current-password">
          <div class="row" style="margin-top:10px">
            <button id="btnLogin" class="btn btn-primary" style="flex:1">Konekte</button>
            <button id="btnShowPhone" class="btn btn-alt" style="flex:1">Konekte ak Telefòn</button>
          </div>
          <div class="small muted" style="margin-top:8px">
            <span id="openTermsFromLogin" class="btn-ghost">Kondisyon Itilizasyon</span>
          </div>

          <!-- PHONE AUTH -->
          <div id="phoneAuth" class="hidden" style="margin-top:12px">
            <label>Nimewo Telefòn (+509...)</label><input id="phoneNumber" placeholder="+50937xxxxxx">
            <div id="recaptcha-container"></div>
            <div class="row" style="margin-top:8px">
              <button id="btnSendCode" class="btn btn-primary">Voye Kòd</button>
              <button id="btnHidePhone" class="btn btn-alt">Anile</button>
            </div>
            <div id="codeBlock" class="hidden" style="margin-top:8px">
              <label>Kòd Verifye</label><input id="phoneCode" placeholder="123456">
              <button id="btnVerifyCode" class="btn btn-primary" style="margin-top:8px">Verifye & Antre</button>
            </div>
          </div>
        </div>

        <!-- SIGNUP -->
        <div id="signupPane" class="hidden">
          <label>Non konplè</label><input id="suName" placeholder="Jean Paul">
          <div class="row">
            <div style="flex:1">
              <label>Jou</label><input id="suDay" type="number" min="1" max="31" placeholder="JJ">
            </div>
            <div style="flex:1">
              <label>Mwa</label><input id="suMonth" type="number" min="1" max="12" placeholder="MM">
            </div>
            <div style="flex:1">
              <label>Ane</label><input id="suYear" type="number" min="1900" max="2100" placeholder="AAAA">
            </div>
          </div>
          <label>Telefòn</label><input id="suPhone" placeholder="+50937xxxxxx">
          <label>Imèl</label><input id="suEmail" type="email" placeholder="ou@exemple.com">
          <label>Modpas</label><input id="suPass" type="password" placeholder="••••••">
          <div class="small" style="margin-top:8px">
            <input id="suAgree" type="checkbox"> Mwen li epi mwen aksepte <span id="openTermsFromSignup" class="btn-ghost">Kondisyon yo</span>
          </div>
          <div class="row" style="margin-top:10px">
            <button id="btnSignup" class="btn btn-primary" style="flex:1">Kreye Kont</button>
          </div>
        </div>

        <!-- TERMS (long) -->
        <div id="termsPane" class="hidden" style="margin-top:12px">
          <h3 style="margin:6px 0">Kondisyon Itilizasyon</h3>
          <div style="max-height:260px; overflow:auto" class="small muted">
            <p><b>Disponiblite:</b> Sèvis la disponib sèlman pou moun ki rete an Ayiti, laj minimòm 18 ane.</p>
            <p><b>Kont:</b> Yon sèl kont pa itilizatè. Enfòmasyon dwe veritab. Aktivite ilegal entèdi.</p>
            <p><b>Tranzaksyon:</b> Tout tranzaksyon final; pa gen ranvèsman. Sistèm ka mete limit oswa bloke kont si gen vyolasyon.</p>
            <p><b>Frè:</b> Frè sistèm lan se <b>15%</b>. Konvèsyon estanda: <b>1 minit = 0.82 Gdes</b>. Sòm resevwa: minit × 0.82 × 0.85.</p>
            <p><b>Retre:</b> Retre posib atravè MonCash, Natcash, Paryaj Lakay, Paryaj Pam. Retre depann de balans disponib.</p>
            <p><b>Done:</b> Done pwoteje pa Firebase; nou itilize yo sèlman pou fonksyonman sèvis la.</p>
            <p><b>Kontakt:</b> WhatsApp: +509 4711 1123 · Imèl: echanjplus@gmail.com · Adrès: Anse d’Hainault, Grandans, Ayiti.</p>
            <p><b>Chanjman:</b> Kondisyon yo ka chanje nenpòt ki lè; yo antre an aplikasyon imedyatman.</p>
          </div>
          <div class="row" style="margin-top:8px">
            <button id="btnTermsBack" class="btn btn-alt">Retounen</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== MAIN (APRE LOGIN) ===== -->
    <div id="main" class="hidden swipe-area">
      <div class="topbar">
        <div class="brand-top"><em>ECHANJ</em> PLUS</div>
        <div class="small">
          <div id="userMask" class="maskEmail"></div>
          <div class="muted"><button id="btnLogout" class="btn btn-alt" style="margin-top:6px">Dekonekte</button></div>
        </div>
      </div>

      <!-- Wallet on top -->
      <div class="wallet">
        <div class="wallet-header">
          <div class="logo-mini"></div>
          <div>ECHANJ PLUS Wallet</div>
        </div>
        <div class="balances">
          <div class="pill">
            <h4>Sale Balance (minit)</h4>
            <div class="val" id="saleBalance">0</div>
          </div>
          <div class="pill">
            <h4>Withdraw Balance (Gdes)</h4>
            <div class="val" id="withdrawBalance">0.00</div>
          </div>
        </div>
      </div>

      <!-- Pages -->
      <div id="pages" style="margin-top:12px">

        <!-- PAGE: SEND -->
        <div id="page-send" class="page card">
          <h3>Voye Minit</h3>
          <label>Operatè</label>
          <select id="sendOperator">
            <option value="digicel">Digicel</option>
            <option value="natcom">Natcom</option>
          </select>
          <label>Kantite Minit</label><input id="sendMinutes" type="number" min="1" placeholder="eg. 50">
          <div class="row" style="margin-top:10px">
            <button id="btnComposeUSSD" class="btn btn-primary">Konpoze USSD</button>
          </div>
          <div class="small muted" style="margin-top:8px">
            Nimewo sistèm: Digicel <b>+50947111123</b> · Natcom <b>+50932160708</b>
          </div>
          <div id="confirmDigicel" class="hidden" style="margin-top:10px">
            <div class="small muted">Pou konfime Digicel: peze bouton anba a.</div>
            <button id="btnConfirmDigicel" class="btn btn-alt" style="margin-top:6px">Konfime *128*1#</button>
          </div>
        </div>

        <!-- PAGE: PAY (WALLET + RETRE) -->
        <div id="page-pay" class="page card hidden">
          <h3>Peman & Retre</h3>
          <div class="small muted">W ap wè bous la ak balans yo. Klike “Retre” pou chwazi metòd.</div>
          <div class="wallet" style="margin-top:10px">
            <div class="wallet-header">
              <div class="logo-mini"></div>
              <div>ECHANJ PLUS Wallet</div>
            </div>
            <div class="balances">
              <div class="pill">
                <h4>Sale Balance (minit)</h4><div class="val" id="saleBalance2">0</div>
              </div>
              <div class="pill">
                <h4>Withdraw Balance (Gdes)</h4><div class="val" id="withdrawBalance2">0.00</div>
              </div>
            </div>
            <div class="row" style="margin-top:10px">
              <button id="btnShowWithdraw" class="btn btn-primary">Retre</button>
              <button id="btnWithdrawAll" class="btn btn-alt">Retre tout</button>
            </div>
          </div>

          <!-- Withdraw methods -->
          <div id="withdrawMethods" class="hidden" style="margin-top:12px">
            <label>Metòd</label>
            <select id="payMethod">
              <option value="moncash">MonCash</option>
              <option value="natcash">NatCash</option>
              <option value="paryajLakay">Paryaj Lakay</option>
              <option value="paryajPam">Paryaj Pam</option>
            </select>

            <div id="formMonNat" style="margin-top:6px">
              <label>Non Kont</label><input id="payName" placeholder="Non kont lan">
              <label>Nimewo Kont</label><input id="payAccount" placeholder="Nimewo kont">
            </div>
            <div id="formParyaj" class="hidden" style="margin-top:6px">
              <label>Nimewo Kont</label><input id="betAccount" placeholder="Nimewo kont Paryaj">
            </div>
            <label style="margin-top:6px">Montan (Gdes)</label><input id="payAmount" type="number" min="1" placeholder="eg. 400">

            <div class="row" style="margin-top:10px">
              <button id="btnSavePay" class="btn btn-primary">Sove / Peye</button>
              <button id="btnHideWithdraw" class="btn btn-alt">Anile</button>
            </div>
          </div>
        </div>

        <!-- PAGE: HOME (AKEY) -->
        <div id="page-home" class="page card hidden">
          <div class="row" style="align-items:center">
            <div class="logo-mini" style="width:48px;height:48px;border-radius:14px"></div>
            <div style="font-weight:900;font-size:22px">Byenveni nan <span style="color:var(--accent)">ECHANJ PLUS</span></div>
          </div>
          <div class="muted small" style="margin-top:6px">
            Sèvis echanj minit & retrè an goud. Fè premye tranzaksyon ou kounye a!
          </div>
          <div class="card" style="margin-top:10px">
            <div class="row">
              <div style="flex:1">
                <div class="muted small">Sale Balance</div>
                <div class="val" id="saleBalanceHome" style="font-weight:900;font-size:22px">0</div>
              </div>
              <div style="flex:1">
                <div class="muted small">Withdraw Balance</div>
                <div class="val" id="withdrawBalanceHome" style="font-weight:900;font-size:22px">0.00</div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE: PROFILE -->
        <div id="page-profile" class="page card hidden">
          <h3>Pwofil</h3>
          <div id="profileEdit">
            <label>Non</label><input id="pfName">
            <label>Telefòn</label><input id="pfPhone">
            <label>Laj</label><input id="pfAge" type="number" min="18" placeholder="18+">
            <label>Vil</label><input id="pfCity">
            <label>Sèks</label>
            <select id="pfSex"><option value="">Chwazi</option><option>Gason</option><option>Fi</option><option>Lòt</option></select>
            <label>Foto (URL)</label><input id="pfPhoto" placeholder="https://...">
            <label>Imèl (readonly)</label><input id="pfEmail" readonly>
            <div class="row" style="margin-top:10px">
              <button id="btnSaveProfile" class="btn btn-primary">Sove</button>
            </div>
          </div>
          <div id="profileView" class="hidden">
            <div class="center">
              <img id="pfPhotoView" src="" alt="foto" style="width:96px;height:96px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.1)">
              <div style="font-weight:900;margin-top:8px" id="pfNameView"></div>
              <div class="small muted" id="pfCityView"></div>
            </div>
            <div class="card" style="margin-top:10px">
              <div class="small"><b>Telefòn:</b> <span id="pfPhoneView"></span></div>
              <div class="small"><b>Laj:</b> <span id="pfAgeView"></span></div>
              <div class="small"><b>Sèks:</b> <span id="pfSexView"></span></div>
              <div class="small"><b>Imèl:</b> <span id="pfEmailView"></span></div>
            </div>
          </div>
        </div>

        <!-- PAGE: ABOUT -->
        <div id="page-about" class="page card hidden">
          <h3>About</h3>
          <div class="acc-item">
            <div class="acc-head">🔼 Kontak & Èd</div>
            <div class="acc-body">
              <div class="small">WhatsApp: <b>+509 4711 1123</b></div>
              <div class="small">Imèl: <b>echanjplus@gmail.com</b></div>
              <div class="small">Adrès: <b>Anse d’Hainault, Grandans, Ayiti</b></div>
            </div>
          </div>
          <div class="acc-item">
            <div class="acc-head">🔼 Kondisyon Sistèm lan</div>
            <div class="acc-body small muted">
       
